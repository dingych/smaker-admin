{"remainingRequest":"D:\\work\\工作\\个人\\个人项目\\smaker\\pig-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\工作\\个人\\个人项目\\smaker\\pig-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\work\\工作\\个人\\个人项目\\smaker\\pig-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\工作\\个人\\个人项目\\smaker\\pig-ui\\src\\components\\iframe\\main.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\工作\\个人\\个人项目\\smaker\\pig-ui\\src\\components\\iframe\\main.vue","mtime":1551667984114},{"path":"D:\\work\\工作\\个人\\个人项目\\smaker\\pig-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\工作\\个人\\个人项目\\smaker\\pig-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\work\\工作\\个人\\个人项目\\smaker\\pig-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\工作\\个人\\个人项目\\smaker\\pig-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport _objectSpread from \"D:\\\\work\\\\\\u5DE5\\u4F5C\\\\\\u4E2A\\u4EBA\\\\\\u4E2A\\u4EBA\\u9879\\u76EE\\\\smaker\\\\pig-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nimport NProgress from 'nprogress'; // progress bar\n\nimport 'nprogress/nprogress.css'; // progress bar style\n\nexport default {\n  name: 'AvueIframe',\n  data: function data() {\n    return {\n      urlPath: this.getUrlPath() //iframe src 路径\n\n    };\n  },\n  created: function created() {\n    NProgress.configure({\n      showSpinner: false\n    });\n  },\n  mounted: function mounted() {\n    this.load();\n    this.resize();\n  },\n  props: ['routerPath'],\n  watch: {\n    $route: function $route() {\n      this.load();\n    },\n    routerPath: function routerPath() {\n      // 监听routerPath变化，改变src路径\n      this.urlPath = this.getUrlPath();\n    }\n  },\n  components: _objectSpread({}, mapGetters(['screen'])),\n  methods: {\n    // 显示等待框\n    show: function show() {\n      NProgress.start();\n    },\n    // 隐藏等待狂\n    hide: function hide() {\n      NProgress.done();\n    },\n    // 加载浏览器窗口变化自适应\n    resize: function resize() {\n      var _this = this;\n\n      window.onresize = function () {\n        _this.iframeInit();\n      };\n    },\n    // 加载组件\n    load: function load() {\n      var _this2 = this;\n\n      this.show();\n      var flag = true; //URL是否包含问号\n\n      if (this.$route.query.src.indexOf('?') == -1) {\n        flag = false;\n      }\n\n      var list = [];\n\n      for (var key in this.$route.query) {\n        if (key != 'src' && key != 'name') {\n          list.push(\"\".concat(key, \"= this.$route.query[key]\"));\n        }\n      }\n\n      list = list.join('&').toString();\n\n      if (flag) {\n        this.$route.query.src = \"\".concat(this.$route.query.src).concat(list.length > 0 ? \"&list\" : '');\n      } else {\n        this.$route.query.src = \"\".concat(this.$route.query.src).concat(list.length > 0 ? \"?list\" : '');\n      } //超时5s自动隐藏等待框，加强用户体验\n\n\n      var time = 5;\n      var timeFunc = setInterval(function () {\n        time--;\n\n        if (time == 0) {\n          _this2.hide();\n\n          clearInterval(timeFunc);\n        }\n      }, 1000);\n      this.iframeInit();\n    },\n    //iframe窗口初始化\n    iframeInit: function iframeInit() {\n      var _this3 = this;\n\n      var iframe = this.$refs.iframe;\n      var clientHeight = document.documentElement.clientHeight - (screen > 1 ? 200 : 130);\n      iframe.style.height = \"\".concat(clientHeight, \"px\");\n\n      if (iframe.attachEvent) {\n        iframe.attachEvent('onload', function () {\n          _this3.hide();\n        });\n      } else {\n        iframe.onload = function () {\n          _this3.hide();\n        };\n      }\n    },\n    getUrlPath: function getUrlPath() {\n      //获取 iframe src 路径\n      var url = window.location.href;\n      url = url.replace('/myiframe', '');\n      return url;\n    }\n  }\n};",{"version":3,"sources":["main.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <basic-container>\r\n      <iframe v-if=\"$route.query.src\"\r\n              :src='$route.query.src'\r\n              class=\"iframe\"\r\n              ref=\"iframe\"></iframe>\r\n      <iframe v-else\r\n              :src=\"urlPath\"\r\n              class=\"iframe\"\r\n              ref=\"iframe\"></iframe>\r\n    </basic-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport NProgress from 'nprogress' // progress bar\r\nimport 'nprogress/nprogress.css' // progress bar style\r\nexport default {\r\n  name: 'AvueIframe',\r\n  data () {\r\n    return {\r\n      urlPath: this.getUrlPath() //iframe src 路径\r\n    }\r\n  },\r\n  created () {\r\n    NProgress.configure({ showSpinner: false })\r\n  },\r\n  mounted () {\r\n    this.load()\r\n    this.resize()\r\n  },\r\n  props: ['routerPath'],\r\n  watch: {\r\n    $route: function () {\r\n      this.load()\r\n    },\r\n    routerPath: function () {\r\n      // 监听routerPath变化，改变src路径\r\n      this.urlPath = this.getUrlPath()\r\n    }\r\n  },\r\n  components: {\r\n    ...mapGetters(['screen']),\r\n  },\r\n  methods: {\r\n    // 显示等待框\r\n    show () {\r\n      NProgress.start()\r\n    },\r\n    // 隐藏等待狂\r\n    hide () {\r\n      NProgress.done()\r\n    },\r\n    // 加载浏览器窗口变化自适应\r\n    resize () {\r\n      window.onresize = () => {\r\n        this.iframeInit()\r\n      }\r\n    },\r\n    // 加载组件\r\n    load () {\r\n      this.show()\r\n      var flag = true //URL是否包含问号\r\n      if (this.$route.query.src.indexOf('?') == -1) {\r\n        flag = false\r\n      }\r\n      var list = []\r\n      for (var key in this.$route.query) {\r\n        if (key != 'src' && key != 'name') {\r\n          list.push(`${key}= this.$route.query[key]`)\r\n        }\r\n      }\r\n      list = list.join('&').toString()\r\n      if (flag) {\r\n        this.$route.query.src = `${this.$route.query.src}${\r\n          list.length > 0 ? `&list` : ''\r\n          }`\r\n      } else {\r\n        this.$route.query.src = `${this.$route.query.src}${\r\n          list.length > 0 ? `?list` : ''\r\n          }`\r\n      }\r\n      //超时5s自动隐藏等待框，加强用户体验\r\n      let time = 5\r\n      const timeFunc = setInterval(() => {\r\n        time--\r\n        if (time == 0) {\r\n          this.hide()\r\n          clearInterval(timeFunc)\r\n        }\r\n      }, 1000)\r\n      this.iframeInit()\r\n    },\r\n    //iframe窗口初始化\r\n    iframeInit () {\r\n      const iframe = this.$refs.iframe\r\n      const clientHeight = document.documentElement.clientHeight - (screen > 1 ? 200 : 130);\r\n      iframe.style.height = `${clientHeight}px`\r\n      if (iframe.attachEvent) {\r\n        iframe.attachEvent('onload', () => {\r\n          this.hide()\r\n        })\r\n      } else {\r\n        iframe.onload = () => {\r\n          this.hide()\r\n        }\r\n      }\r\n    },\r\n    getUrlPath: function () {\r\n      //获取 iframe src 路径\r\n      let url = window.location.href\r\n      url = url.replace('/myiframe', '')\r\n      return url\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.iframe {\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 0;\r\n  overflow: hidden;\r\n  box-sizing: border-box;\r\n}\r\n</style>"],"sourceRoot":"src/components/iframe"}]}