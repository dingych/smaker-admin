{"remainingRequest":"D:\\work\\工作\\个人\\个人项目\\smaker\\smaker-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\工作\\个人\\个人项目\\smaker\\smaker-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\work\\工作\\个人\\个人项目\\smaker\\smaker-admin\\src\\router\\avue-router.js","dependencies":[{"path":"D:\\work\\工作\\个人\\个人项目\\smaker\\smaker-admin\\src\\router\\avue-router.js","mtime":1555580602614},{"path":"D:\\work\\工作\\个人\\个人项目\\smaker\\smaker-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\工作\\个人\\个人项目\\smaker\\smaker-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\work\\工作\\个人\\个人项目\\smaker\\smaker-admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport _typeof from \"D:\\\\work\\\\\\u5DE5\\u4F5C\\\\\\u4E2A\\u4EBA\\\\\\u4E2A\\u4EBA\\u9879\\u76EE\\\\smaker\\\\smaker-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/typeof\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _Object$keys from \"D:\\\\work\\\\\\u5DE5\\u4F5C\\\\\\u4E2A\\u4EBA\\\\\\u4E2A\\u4EBA\\u9879\\u76EE\\\\smaker\\\\smaker-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/keys\";\nimport \"core-js/modules/web.dom.iterable\";\n\nvar RouterPlugin = function RouterPlugin() {\n  this.$router = null;\n  this.$store = null;\n};\n\nRouterPlugin.install = function (router, store) {\n  var _this = this;\n\n  this.$router = router;\n  this.$store = store;\n\n  function objToform(obj) {\n    var result = [];\n\n    _Object$keys(obj).forEach(function (ele) {\n      result.push(\"\".concat(ele, \"=\").concat(obj[ele]));\n    });\n\n    return result.join('&');\n  }\n\n  this.$router.$avueRouter = {\n    // 全局配置\n    $website: this.$store.getters.website,\n    $defaultTitle: 'smaker微服务快速开发框架',\n    routerList: [],\n    group: '',\n    safe: this,\n    // 设置标题\n    setTitle: function setTitle(title) {\n      title = title ? \"\".concat(title, \"\\u2014\\u2014\").concat(this.$defaultTitle) : this.$defaultTitle;\n      document.title = title;\n    },\n    closeTag: function closeTag(value) {\n      var tag = value || _this.$store.getters.tag;\n\n      _this.$store.commit('DEL_TAG', tag);\n    },\n    // 处理路由\n    getPath: function getPath(params) {\n      var src = params.src;\n      var result = src || '/';\n\n      if (src.includes('http') || src.includes('https')) {\n        result = \"/myiframe/urlPath?\".concat(objToform(params));\n      }\n\n      return result;\n    },\n    // 正则处理路由\n    vaildPath: function vaildPath(list, path) {\n      var result = false;\n      list.forEach(function (ele) {\n        if (new RegExp('^' + ele + '.*', 'g').test(path)) {\n          result = true;\n        }\n      });\n      return result;\n    },\n    // 设置路由值\n    getValue: function getValue(route) {\n      var value = '';\n\n      if (route.query.src) {\n        value = route.query.src;\n      } else {\n        value = route.path;\n      }\n\n      return value;\n    },\n    // 动态路由\n    formatRoutes: function formatRoutes() {\n      var _this2 = this;\n\n      var aMenu = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var first = arguments.length > 1 ? arguments[1] : undefined;\n      var aRouter = [];\n      var propsConfig = this.$website.menu.props;\n      var propsDefault = {\n        label: propsConfig.label || 'label',\n        path: propsConfig.path || 'path',\n        icon: propsConfig.icon || 'icon',\n        children: propsConfig.children || 'children',\n        meta: propsConfig.meta || 'meta'\n      };\n      if (aMenu.length === 0) return;\n\n      var _loop = function _loop(i) {\n        var oMenu = aMenu[i];\n        if (_this2.routerList.includes(oMenu[propsDefault.path])) return {\n          v: void 0\n        };\n\n        var path = function () {\n          if (first) {\n            return oMenu[propsDefault.path].replace('/index', '');\n          } else {\n            return oMenu[propsDefault.path];\n          }\n        }();\n\n        var _component = oMenu.component;\n        var name = oMenu[propsDefault.label];\n        var icon = oMenu[propsDefault.icon];\n        var children = oMenu[propsDefault.children];\n        var meta = {\n          keepAlive: Number(oMenu['keepAlive']) === 0\n        };\n        var isChild = children.length !== 0;\n        var oRouter = {\n          path: path,\n          component: function component(resolve) {\n            // 判断是否为首路由\n            if (first) {\n              require(['../page/index'], resolve); // 判断是否为多层路由\n\n            } else if (isChild && !first) {\n              require(['../page/index/layout'], resolve); // 判断是否为最终的页面视图\n\n            } else {\n              require([\"../\".concat(_component, \".vue\")], resolve);\n            }\n          },\n          name: name,\n          icon: icon,\n          meta: meta,\n          redirect: function () {\n            if (!isChild && first) return \"\".concat(path, \"/index\");else return '';\n          }(),\n          // 处理是否为一级路由\n          children: !isChild ? function () {\n            if (first) {\n              oMenu[propsDefault.path] = \"\".concat(path, \"/index\");\n              return [{\n                component: function component(resolve) {\n                  require([\"../\".concat(_component, \".vue\")], resolve);\n                },\n                icon: icon,\n                name: name,\n                meta: meta,\n                path: 'index'\n              }];\n            }\n\n            return [];\n          }() : function () {\n            return _this2.formatRoutes(children, false);\n          }()\n        };\n        aRouter.push(oRouter);\n      };\n\n      for (var i = 0; i < aMenu.length; i++) {\n        var _ret = _loop(i);\n\n        if (_typeof(_ret) === \"object\") return _ret.v;\n      }\n\n      if (first) {\n        if (!this.routerList.includes(aRouter[0][propsDefault.path])) {\n          this.safe.$router.addRoutes(aRouter);\n          this.routerList.push(aRouter[0][propsDefault.path]);\n        }\n      } else {\n        return aRouter;\n      }\n    }\n  };\n};\n\nexport default RouterPlugin;",{"version":3,"sources":["D:\\work\\工作\\个人\\个人项目\\smaker\\smaker-admin\\src\\router\\avue-router.js"],"names":["RouterPlugin","$router","$store","install","router","store","objToform","obj","result","forEach","ele","push","join","$avueRouter","$website","getters","website","$defaultTitle","routerList","group","safe","setTitle","title","document","closeTag","value","tag","commit","getPath","params","src","includes","vaildPath","list","path","RegExp","test","getValue","route","query","formatRoutes","aMenu","first","aRouter","propsConfig","menu","props","propsDefault","label","icon","children","meta","length","i","oMenu","replace","component","name","keepAlive","Number","isChild","oRouter","resolve","require","redirect","addRoutes"],"mappings":"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","sourcesContent":["let RouterPlugin = function () {\r\n  this.$router = null\r\n  this.$store = null\r\n}\r\nRouterPlugin.install = function (router, store) {\r\n  this.$router = router\r\n  this.$store = store\r\n\r\n  function objToform (obj) {\r\n    let result = []\r\n    Object.keys(obj).forEach(ele => {\r\n      result.push(`${ele}=${obj[ele]}`)\r\n    })\r\n    return result.join('&')\r\n  }\r\n  this.$router.$avueRouter = {\r\n    // 全局配置\r\n    $website: this.$store.getters.website,\r\n    $defaultTitle: 'smaker微服务快速开发框架',\r\n    routerList: [],\r\n    group: '',\r\n    safe: this,\r\n    // 设置标题\r\n    setTitle: function (title) {\r\n      title = title ? `${title}——${this.$defaultTitle}` : this.$defaultTitle;\r\n      document.title = title\r\n    },\r\n    closeTag: (value) => {\r\n      const tag = value || this.$store.getters.tag\r\n      this.$store.commit('DEL_TAG', tag)\r\n    },\r\n    // 处理路由\r\n    getPath: function (params) {\r\n      let { src } = params\r\n      let result = src || '/'\r\n      if (src.includes('http') || src.includes('https')) {\r\n        result = `/myiframe/urlPath?${objToform(params)}`\r\n      }\r\n      return result\r\n    },\r\n    // 正则处理路由\r\n    vaildPath: function (list, path) {\r\n      let result = false\r\n      list.forEach(ele => {\r\n        if (new RegExp('^' + ele + '.*', 'g').test(path)) {\r\n          result = true\r\n        }\r\n      })\r\n      return result\r\n    },\r\n    // 设置路由值\r\n    getValue: function (route) {\r\n      let value = ''\r\n      if (route.query.src) {\r\n        value = route.query.src\r\n      } else {\r\n        value = route.path\r\n      }\r\n      return value\r\n    },\r\n    // 动态路由\r\n    formatRoutes: function (aMenu = [], first) {\r\n      const aRouter = []\r\n      const propsConfig = this.$website.menu.props\r\n      const propsDefault = {\r\n        label: propsConfig.label || 'label',\r\n        path: propsConfig.path || 'path',\r\n        icon: propsConfig.icon || 'icon',\r\n        children: propsConfig.children || 'children',\r\n        meta: propsConfig.meta || 'meta'\r\n      }\r\n      if (aMenu.length === 0) return\r\n      for (let i = 0; i < aMenu.length; i++) {\r\n        const oMenu = aMenu[i]\r\n        if (this.routerList.includes(oMenu[propsDefault.path])) return\r\n        const path = (() => {\r\n          if (first) {\r\n            return oMenu[propsDefault.path].replace('/index', '')\r\n          } else {\r\n            return oMenu[propsDefault.path]\r\n          }\r\n        })()\r\n\r\n        const component = oMenu.component\r\n\r\n        const name = oMenu[propsDefault.label]\r\n\r\n        const icon = oMenu[propsDefault.icon]\r\n\r\n        const children = oMenu[propsDefault.children]\r\n\r\n        const meta = {\r\n          keepAlive: Number(oMenu['keepAlive']) === 0\r\n        }\r\n        const isChild = children.length !== 0\r\n        const oRouter = {\r\n          path: path,\r\n          component (resolve) {\r\n            // 判断是否为首路由\r\n            if (first) {\r\n              require(['../page/index'], resolve)\r\n\r\n              // 判断是否为多层路由\r\n            } else if (isChild && !first) {\r\n              require(['../page/index/layout'], resolve)\r\n\r\n              // 判断是否为最终的页面视图\r\n            } else {\r\n              require([`../${component}.vue`], resolve)\r\n            }\r\n          },\r\n          name: name,\r\n          icon: icon,\r\n          meta: meta,\r\n          redirect: (() => {\r\n            if (!isChild && first) return `${path}/index`\r\n            else return ''\r\n          })(),\r\n          // 处理是否为一级路由\r\n          children: !isChild ? (() => {\r\n            if (first) {\r\n              oMenu[propsDefault.path] = `${path}/index`\r\n              return [{\r\n                component (resolve) { require([`../${component}.vue`], resolve) },\r\n                icon: icon,\r\n                name: name,\r\n                meta: meta,\r\n                path: 'index'\r\n              }]\r\n            }\r\n            return []\r\n          })() : (() => {\r\n            return this.formatRoutes(children, false)\r\n          })()\r\n        }\r\n        aRouter.push(oRouter)\r\n      }\r\n      if (first) {\r\n        if (!this.routerList.includes(aRouter[0][propsDefault.path])) {\r\n          this.safe.$router.addRoutes(aRouter)\r\n          this.routerList.push(aRouter[0][propsDefault.path])\r\n        }\r\n      } else {\r\n        return aRouter\r\n      }\r\n    }\r\n  }\r\n}\r\nexport default RouterPlugin\r\n"]}]}