{"remainingRequest":"D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\src\\views\\admin\\user\\info.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\src\\views\\admin\\user\\info.vue","mtime":1557020391334},{"path":"D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _objectSpread from \"D:\\\\work\\\\\\u5DE5\\u4F5C\\\\\\u4E2A\\u4EBA\\\\\\u4E2A\\u4EBA\\u9879\\u76EE\\\\rzl-cloud\\\\smaker-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { handleDown } from \"@/api/admin/user\";\nimport { mapState } from 'vuex';\nimport store from \"@/store\";\nimport request from '@/router/axios';\nexport default {\n  data: function data() {\n    var _this = this;\n\n    var validatePass = function validatePass(rule, value, callback) {\n      if (_this.ruleForm2.password !== '') {\n        if (value !== _this.ruleForm2.newpassword1) {\n          callback(new Error('两次输入密码不一致!'));\n        } else {\n          callback();\n        }\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      switchStatus: '',\n      avatarUrl: '',\n      show: false,\n      headers: {\n        Authorization: 'Bearer ' + store.getters.access_token\n      },\n      ruleForm2: {\n        username: '',\n        password: '',\n        newpassword1: '',\n        newpassword2: '',\n        avatar: '',\n        phone: ''\n      },\n      rules2: {\n        password: [{\n          required: true,\n          min: 6,\n          message: '原密码不能为空且不少于6位',\n          trigger: 'change'\n        }],\n        newpassword1: [{\n          required: false,\n          min: 6,\n          message: '不少于6位',\n          trigger: 'change'\n        }],\n        newpassword2: [{\n          required: false,\n          validator: validatePass,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created: function created() {\n    this.ruleForm2.username = this.userInfo.username;\n    this.ruleForm2.phone = this.userInfo.phone;\n    this.switchStatus = 'userManager';\n  },\n  computed: _objectSpread({}, mapState({\n    userInfo: function userInfo(state) {\n      return state.user.userInfo;\n    }\n  })),\n  methods: {\n    switchTab: function switchTab(tab, event) {\n      this.switchStatus = tab.name;\n    },\n    submitForm: function submitForm(formName) {\n      var _this2 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          request({\n            url: '/admin/user/edit',\n            method: 'put',\n            data: _this2.ruleForm2\n          }).then(function (response) {\n            if (response.data.data) {\n              _this2.$notify({\n                title: '成功',\n                message: '修改成功',\n                type: 'success',\n                duration: 2000\n              }); // 修改密码之后强制重新登录\n\n\n              if (_this2.switchStatus === 'passwordManager') {\n                _this2.$store.dispatch('LogOut').then(function () {\n                  location.reload(); // 为了重新实例化vue-router对象 避免bug\n                });\n              }\n            } else {\n              _this2.$notify({\n                title: '失败',\n                message: response.data.msg,\n                type: 'error',\n                duration: 2000\n              });\n            }\n          }).catch(function () {\n            _this2.$notify({\n              title: '失败',\n              message: '修改失败',\n              type: 'error',\n              duration: 2000\n            });\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n};",{"version":3,"sources":["info.vue"],"names":[],"mappings":"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","sourcesContent":["\r\n\r\n<template>\r\n  <div class=\"app-container calendar-list-container\">\r\n    <basic-container>\r\n      <template>\r\n        <el-tabs @tab-click=\"switchTab\">\r\n          <el-tab-pane label='信息管理' name='userManager'/>\r\n          <el-tab-pane label='密码管理' name='passwordManager'/>\r\n        </el-tabs>\r\n      </template>\r\n      <el-row>\r\n        <el-col :span=\"12\">\r\n          <div class=\"grid-content bg-purple\">\r\n            <el-form :model=\"ruleForm2\"\r\n                     :rules=\"rules2\"\r\n                     ref=\"ruleForm2\"\r\n                     label-width=\"100px\"\r\n                     v-if=\"switchStatus==='userManager'\"\r\n                     class=\"demo-ruleForm\">\r\n              <el-form-item label=\"用户名\"\r\n                            prop=\"username\">\r\n                <el-input type=\"text\"\r\n                          v-model=\"ruleForm2.username\"\r\n                          disabled></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"手机号\" prop=\"phone\">\r\n                <el-input v-model=\"ruleForm2.phone\" placeholder=\"验证码登录使用\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\"\r\n                           @click=\"submitForm('ruleForm2')\">提交\r\n                </el-button>\r\n                <el-button @click=\"resetForm('ruleForm2')\">重置</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n            <el-form :model=\"ruleForm2\"\r\n                     :rules=\"rules2\"\r\n                     ref=\"ruleForm2\"\r\n                     label-width=\"100px\"\r\n                     v-if=\"switchStatus==='passwordManager'\"\r\n                     class=\"demo-ruleForm\">\r\n              <el-form-item label=\"原密码\"\r\n                            prop=\"password\">\r\n                <el-input type=\"password\"\r\n                          v-model=\"ruleForm2.password\"\r\n                          auto-complete=\"off\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"密码\"\r\n                            prop=\"newpassword1\">\r\n                <el-input type=\"password\"\r\n                          v-model=\"ruleForm2.newpassword1\"\r\n                          auto-complete=\"off\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"确认密码\"\r\n                            prop=\"newpassword2\">\r\n                <el-input type=\"password\"\r\n                          v-model=\"ruleForm2.newpassword2\"\r\n                          auto-complete=\"off\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\"\r\n                           @click=\"submitForm('ruleForm2')\">提交\r\n                </el-button>\r\n                <el-button @click=\"resetForm('ruleForm2')\">重置</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </basic-container>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n  import {handleDown} from \"@/api/admin/user\";\r\n  import {mapState} from 'vuex'\r\n  import store from \"@/store\";\r\n  import request from '@/router/axios'\r\n\r\n  export default {\r\n    data() {\r\n      var validatePass = (rule, value, callback) => {\r\n        if (this.ruleForm2.password !== '') {\r\n          if (value !== this.ruleForm2.newpassword1) {\r\n            callback(new Error('两次输入密码不一致!'))\r\n          } else {\r\n            callback()\r\n          }\r\n        } else {\r\n          callback()\r\n        }\r\n      }\r\n      return {\r\n        switchStatus: '',\r\n        avatarUrl: '',\r\n        show: false,\r\n        headers: {\r\n          Authorization: 'Bearer ' + store.getters.access_token\r\n        },\r\n        ruleForm2: {\r\n          username: '',\r\n          password: '',\r\n          newpassword1: '',\r\n          newpassword2: '',\r\n          avatar: '',\r\n          phone: ''\r\n        },\r\n        rules2: {\r\n          password: [{required: true, min: 6, message: '原密码不能为空且不少于6位', trigger: 'change'}],\r\n          newpassword1: [{required: false, min: 6, message: '不少于6位', trigger: 'change'}],\r\n          newpassword2: [{required: false, validator: validatePass, trigger: 'blur'}]\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.ruleForm2.username = this.userInfo.username\r\n      this.ruleForm2.phone = this.userInfo.phone\r\n      this.switchStatus = 'userManager'\r\n    },\r\n    computed: {\r\n      ...mapState({\r\n        userInfo: state => state.user.userInfo\r\n      }),\r\n    },\r\n    methods: {\r\n      switchTab(tab, event) {\r\n        this.switchStatus = tab.name\r\n      },\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate(valid => {\r\n          if (valid) {\r\n            request({\r\n              url: '/admin/user/edit',\r\n              method: 'put',\r\n              data: this.ruleForm2\r\n            }).then(response => {\r\n              if (response.data.data) {\r\n                this.$notify({\r\n                  title: '成功',\r\n                  message: '修改成功',\r\n                  type: 'success',\r\n                  duration: 2000\r\n                })\r\n                // 修改密码之后强制重新登录\r\n                if (this.switchStatus === 'passwordManager') {\r\n                  this.$store.dispatch('LogOut').then(() => {\r\n                    location.reload() // 为了重新实例化vue-router对象 避免bug\r\n                  })\r\n                }\r\n              } else {\r\n                this.$notify({\r\n                  title: '失败',\r\n                  message: response.data.msg,\r\n                  type: 'error',\r\n                  duration: 2000\r\n                })\r\n              }\r\n            }).catch(() => {\r\n              this.$notify({\r\n                title: '失败',\r\n                message: '修改失败',\r\n                type: 'error',\r\n                duration: 2000\r\n              })\r\n            })\r\n          } else {\r\n            return false\r\n          }\r\n        })\r\n      },\r\n      resetForm(formName) {\r\n        this.$refs[formName].resetFields()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n  .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n\r\n  .avatar-uploader-icon {\r\n    font-size: 28px!important;\r\n    color: #8c939d!important;\r\n    width: 178px!important;\r\n    height: 178px!important;\r\n    line-height: 178px!important;\r\n    text-align: center!important;\r\n  }\r\n\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/views/admin/user"}]}