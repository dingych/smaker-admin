{"remainingRequest":"D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\src\\router\\axios.js","dependencies":[{"path":"D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\src\\router\\axios.js","mtime":1551667984187},{"path":"D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport _Promise from \"D:\\\\work\\\\\\u5DE5\\u4F5C\\\\\\u4E2A\\u4EBA\\\\\\u4E2A\\u4EBA\\u9879\\u76EE\\\\rzl-cloud\\\\smaker-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\nimport { serialize } from '@/util/util';\nimport { getStore } from '../util/store';\nimport NProgress from 'nprogress'; // progress bar\n\nimport errorCode from '@/const/errorCode';\nimport router from \"@/router/router\";\nimport { Message } from 'element-ui';\nimport 'nprogress/nprogress.css';\nimport store from \"@/store\"; // progress bar style\n\naxios.defaults.timeout = 30000; // 返回其他状态吗\n\naxios.defaults.validateStatus = function (status) {\n  return status >= 200 && status <= 500; // 默认的\n}; // 跨域请求，允许保存cookie\n\n\naxios.defaults.withCredentials = true; // NProgress Configuration\n\nNProgress.configure({\n  showSpinner: false\n}); // HTTPrequest拦截\n\naxios.interceptors.request.use(function (config) {\n  NProgress.start(); // start progress bar\n\n  var isToken = (config.headers || {}).isToken === false;\n  var token = store.getters.access_token;\n\n  if (token && !isToken) {\n    config.headers['Authorization'] = 'Bearer ' + token; // token\n  } // headers中配置serialize为true开启序列化\n\n\n  if (config.methods === 'post' && config.headers.serialize) {\n    config.data = serialize(config.data);\n    delete config.data.serialize;\n  }\n\n  return config;\n}, function (error) {\n  return _Promise.reject(error);\n}); // HTTPresponse拦截\n\naxios.interceptors.response.use(function (res) {\n  NProgress.done();\n  var status = Number(res.status) || 200;\n  var message = res.data.msg || errorCode[status] || errorCode['default'];\n\n  if (status === 401) {\n    store.dispatch('FedLogOut').then(function () {\n      router.push({\n        path: '/login'\n      });\n    });\n    return;\n  }\n\n  if (status !== 200 || res.data.code === 1) {\n    Message({\n      message: message,\n      type: 'error'\n    });\n    return _Promise.reject(new Error(message));\n  }\n\n  return res;\n}, function (error) {\n  NProgress.done();\n  return _Promise.reject(new Error(error));\n});\nexport default axios;",{"version":3,"sources":["D:\\work\\工作\\个人\\个人项目\\rzl-cloud\\smaker-admin\\src\\router\\axios.js"],"names":["serialize","getStore","NProgress","errorCode","router","Message","store","axios","defaults","timeout","validateStatus","status","withCredentials","configure","showSpinner","interceptors","request","use","config","start","isToken","headers","token","getters","access_token","methods","data","error","reject","response","res","done","Number","message","msg","dispatch","then","push","path","code","type","Error"],"mappings":"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","sourcesContent":["import {serialize} from '@/util/util'\r\nimport {getStore} from '../util/store'\r\nimport NProgress from 'nprogress' // progress bar\r\nimport errorCode from '@/const/errorCode'\r\nimport router from \"@/router/router\"\r\nimport {Message} from 'element-ui'\r\nimport 'nprogress/nprogress.css'\r\nimport store from \"@/store\"; // progress bar style\r\naxios.defaults.timeout = 30000\r\n// 返回其他状态吗\r\naxios.defaults.validateStatus = function (status) {\r\n  return status >= 200 && status <= 500 // 默认的\r\n}\r\n// 跨域请求，允许保存cookie\r\naxios.defaults.withCredentials = true\r\n// NProgress Configuration\r\nNProgress.configure({\r\n  showSpinner: false\r\n})\r\n\r\n// HTTPrequest拦截\r\naxios.interceptors.request.use(config => {\r\n  NProgress.start() // start progress bar\r\n  const isToken = (config.headers || {}).isToken === false\r\n  let token =  store.getters.access_token\r\n  if (token && !isToken) {\r\n    config.headers['Authorization'] = 'Bearer ' + token// token\r\n  }\r\n  // headers中配置serialize为true开启序列化\r\n  if (config.methods === 'post' && config.headers.serialize) {\r\n    config.data = serialize(config.data)\r\n    delete config.data.serialize\r\n  }\r\n  return config\r\n}, error => {\r\n  return Promise.reject(error)\r\n})\r\n\r\n\r\n// HTTPresponse拦截\r\naxios.interceptors.response.use(res => {\r\n  NProgress.done()\r\n  const status = Number(res.status) || 200\r\n  const message = res.data.msg || errorCode[status] || errorCode['default']\r\n  if (status === 401) {\r\n    store.dispatch('FedLogOut').then(() => {\r\n      router.push({path: '/login'})\r\n    })\r\n    return\r\n  }\r\n\r\n  if (status !== 200 || res.data.code === 1) {\r\n    Message({\r\n      message: message,\r\n      type: 'error'\r\n    })\r\n    return Promise.reject(new Error(message))\r\n  }\r\n\r\n  return res\r\n}, error => {\r\n  NProgress.done()\r\n  return Promise.reject(new Error(error))\r\n})\r\n\r\nexport default axios\r\n"]}]}